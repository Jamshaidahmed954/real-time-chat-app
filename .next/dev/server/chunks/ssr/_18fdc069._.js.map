{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 103, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/lib/supabase/chat.ts"],"sourcesContent":["import { supabase } from \"@/lib/supabase/client\"\nimport type { Conversation, ConversationWithUser, Message, User } from \"@/lib/types\"\n\n// Get all conversations for current user\nexport async function getConversations(userId: string) {\n  const { data: conversations, error } = await supabase\n    .from(\"conversations\")\n    .select(\n      `\n      *,\n      creator:creator_id(*),\n      participant:participant_id(*)\n    `,\n    )\n    .or(`creator_id.eq.${userId},participant_id.eq.${userId}`)\n    .order(\"updated_at\", { ascending: false })\n\n  if (error) throw error\n\n  const conversationsWithDetails = await Promise.all(\n    conversations.map(async (conv: any) => {\n      const { data: lastMessage } = await supabase\n        .from(\"messages\")\n        .select(\"*\")\n        .eq(\"conversation_id\", conv.id)\n        .order(\"created_at\", { ascending: false })\n        .limit(1)\n        .single()\n\n      // Determine which user is the \"other\" user for the current userId\n      const creatorUser = conv.creator\n      const participantUser = conv.participant\n\n      const otherUser = creatorUser?.id === userId ? participantUser : creatorUser\n\n      return {\n        ...conv,\n        other_user: otherUser,\n        last_message: lastMessage,\n        unread_count: 0, // Can implement unread tracking\n      }\n    }),\n  )\n\n  return conversationsWithDetails as ConversationWithUser[]\n}\n\n// Get or create conversation with a user\nexport async function getOrCreateConversation(userId: string, participantId: string) {\n  // Check if conversation exists\n  const { data: existingConversation, error: fetchError } = await supabase\n    .from(\"conversations\")\n    .select(\"*\")\n    .or(\n      `and(creator_id.eq.${userId},participant_id.eq.${participantId}),and(creator_id.eq.${participantId},participant_id.eq.${userId})`,\n    )\n    .single()\n\n  if (!fetchError && existingConversation) {\n    return existingConversation as Conversation\n  }\n\n  // Create new conversation\n  const { data: newConversation, error: createError } = await supabase\n    .from(\"conversations\")\n    .insert([\n      {\n        creator_id: userId,\n        participant_id: participantId,\n      },\n    ])\n    .select()\n    .single()\n\n  if (createError) throw createError\n  return newConversation as Conversation\n}\n\n// Get messages for a conversation\nexport async function getMessages(conversationId: string) {\n  const { data: messages, error } = await supabase\n    .from(\"messages\")\n    .select(\n      `\n      *,\n      sender:sender_id(id, name, avatar_url)\n    `,\n    )\n    .eq(\"conversation_id\", conversationId)\n    .order(\"created_at\", { ascending: true })\n\n  if (error) throw error\n  return messages\n}\n\n// Send a message\nexport async function sendMessage(conversationId: string, senderId: string, text: string) {\n  const { data: message, error } = await supabase\n    .from(\"messages\")\n    .insert([\n      {\n        conversation_id: conversationId,\n        sender_id: senderId,\n        text,\n      },\n    ])\n    .select(\n      `\n      *,\n      sender:sender_id(id, name, avatar_url)\n    `,\n    )\n    .single()\n\n  if (error) throw error\n\n  // Update conversation's updated_at\n  await supabase.from(\"conversations\").update({ updated_at: new Date().toISOString() }).eq(\"id\", conversationId)\n\n  return message\n}\n\n// Subscribe to messages in a conversation\nexport function subscribeToMessages(conversationId: string, callback: (message: Message) => void) {\n  // Create a channel per conversation and subscribe to INSERT events\n  const channel = supabase.channel(`messages-${conversationId}`)\n\n  channel.on(\n    \"postgres_changes\",\n    {\n      event: \"INSERT\",\n      schema: \"public\",\n      table: \"messages\",\n      filter: `conversation_id=eq.${conversationId}`,\n    },\n    (payload: any) => {\n      // Forward the new row to caller\n      try {\n        callback(payload.new as Message)\n      } catch (err) {\n        console.error(\"Error in subscribeToMessages callback:\", err)\n      }\n    },\n  )\n\n  // Subscribe and add debug logs so we can confirm other clients are actually subscribed\n  // `subscribe()` returns a promise-like result; cast to any to attach then/catch for debugging\n  try {\n    ;(channel.subscribe() as any)\n      .then(() => console.debug(`subscribed to messages-${conversationId}`))\n      .catch((e: any) => console.warn(`subscribe error for messages-${conversationId}:`, e))\n  } catch (e) {\n    // Some runtimes may throw synchronously; log and proceed\n    console.warn(`subscribe exception for messages-${conversationId}:`, e)\n  }\n\n  return channel\n}\n\n// Get all users except current user\nexport async function getAllUsers(currentUserId: string) {\n  const { data: users, error } = await supabase.from(\"users\").select(\"*\").neq(\"id\", currentUserId)\n\n  if (error) throw error\n  return users as User[]\n}\n\n// Get single user by id\nexport async function getUserById(userId: string) {\n  const { data: user, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", userId).single()\n  if (error) throw error\n  return user as User\n}\n\n// Update user status\nexport async function updateUserStatus(userId: string, status: \"online\" | \"away\" | \"offline\") {\n  const { error } = await supabase.from(\"users\").update({ status }).eq(\"id\", userId)\n\n  if (error) throw error\n}\n\n// Typing indicator functions\nexport function startTyping(conversationId: string, userId: string) {\n  const channel = supabase.channel(`typing-${conversationId}`)\n  channel.subscribe()\n  channel.track({ user_id: userId, is_typing: true })\n  return channel\n}\n\nexport function stopTyping(channel: any) {\n  channel.untrack()\n}\n\nexport function subscribeToTyping(conversationId: string, callback: (typingUsers: string[]) => void) {\n  const channel = supabase.channel(`typing-${conversationId}`)\n\n  channel.on('presence', { event: 'sync' }, () => {\n    const presenceState = channel.presenceState()\n    const typingUsers = Object.values(presenceState).flat().map((state: any) => state.user_id)\n    callback(typingUsers)\n  })\n\n  channel.on('presence', { event: 'join' }, ({ key, newPresences }) => {\n    const typingUsers = newPresences.map((p: any) => p.user_id)\n    callback(typingUsers)\n  })\n\n  channel.on('presence', { event: 'leave' }, ({ key, leftPresences }) => {\n    const typingUsers = leftPresences.map((p: any) => p.user_id)\n    callback(typingUsers)\n  })\n\n  channel.subscribe()\n  return channel\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/components/chat/sidebar.tsx"],"sourcesContent":["\"use client\"\n\nimport { useAuth } from \"@/context/auth-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport Link from \"next/link\"\nimport { getAllUsers, getOrCreateConversation } from \"@/lib/supabase/chat\"\nimport type { User } from \"@/lib/types\"\nimport { supabase } from \"@/lib/supabase/client\"\n\ninterface SidebarProps {\n  selectedChat: string | null\n  onSelectChat: (chatId: string) => void\n}\n\nexport default function Sidebar({ selectedChat, onSelectChat }: SidebarProps) {\n  const { user, logout } = useAuth()\n  const router = useRouter()\n  const [searchQuery, setSearchQuery] = useState(\"\")\n  const [users, setUsers] = useState<User[]>([])\n  const [isLoading, setIsLoading] = useState(true)\n  const [selectedUserId, setSelectedUserId] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (!user) return\n\n    const loadUsers = async () => {\n      try {\n        setIsLoading(true)\n        const data = await getAllUsers(user.id)\n        setUsers(data)\n      } catch (error) {\n        console.error(\"Error loading users:\", error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    loadUsers()\n\n    // Subscribe to user updates\n    const channel = supabase.channel(`users`).on(\n      \"postgres_changes\",\n      {\n        event: \"*\",\n        schema: \"public\",\n        table: \"users\",\n      },\n      () => {\n        loadUsers()\n      },\n    )\n\n    channel.subscribe()\n\n    return () => {\n      channel.unsubscribe()\n    }\n  }, [user])\n\n  const handleLogout = async () => {\n    await logout()\n    router.push(\"/login\")\n  }\n\n  const filteredUsers = users.filter((user) =>\n    user.name.toLowerCase().includes(searchQuery.toLowerCase()),\n  )\n\n  return (\n    <div className=\"w-full max-w-xs h-screen bg-sidebar border-r border-sidebar-border flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-sidebar-border\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <Link href=\"/profile\" className=\"flex items-center gap-3 flex-1\">\n            <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-sidebar-primary-foreground font-bold hover:shadow-lg transition-shadow\">\n              {user?.name?.[0]?.toUpperCase()}\n            </div>\n            <div className=\"flex-1\">\n              <h2 className=\"font-semibold text-sidebar-foreground text-sm hover:text-primary transition-colors\">\n                {user?.name}\n              </h2>\n              <p className=\"text-xs text-sidebar-accent-foreground\">{user?.status}</p>\n            </div>\n          </Link>\n          <div className=\"flex gap-1\">\n            <Link href=\"/settings\">\n              <button className=\"p-2 hover:bg-sidebar-accent rounded-lg transition-colors\" title=\"Settings\">\n                <svg className=\"w-5 h-5 text-sidebar-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c.426 1.756 2.924 1.756 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\"\n                  />\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth={2}\n                    d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"\n                  />\n                </svg>\n              </button>\n            </Link>\n            <button\n              onClick={handleLogout}\n              className=\"p-2 hover:bg-sidebar-accent rounded-lg transition-colors\"\n              title=\"Logout\"\n            >\n              <svg className=\"w-5 h-5 text-sidebar-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\n                />\n              </svg>\n            </button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative\">\n          <Input\n            type=\"text\"\n            placeholder=\"Search users...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"h-9 pl-10 bg-sidebar-accent border-sidebar-border text-sidebar-foreground placeholder:text-sidebar-accent-foreground\"\n          />\n          <svg\n            className=\"absolute left-3 top-2.5 w-4 h-4 text-sidebar-accent-foreground\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            viewBox=\"0 0 24 24\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"\n            />\n          </svg>\n        </div>\n      </div>\n\n      {/* Chats List */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {isLoading ? (\n          <div className=\"p-4 text-center text-sidebar-accent-foreground text-sm\">Loading users...</div>\n        ) : filteredUsers.length === 0 ? (\n          <div className=\"p-4 text-center text-sidebar-accent-foreground text-sm\">No users found</div>\n        ) : (\n          <div className=\"space-y-1 p-2\">\n            {filteredUsers.map((selectedUser) => (\n              <button\n                key={selectedUser.id}\n                onClick={async () => {\n                  if (!user) return\n                  setSelectedUserId(selectedUser.id)\n                  try {\n                    const conversation = await getOrCreateConversation(user.id, selectedUser.id)\n                    onSelectChat(conversation.id)\n                  } catch (error) {\n                    console.error(\"Error creating conversation:\", error)\n                  }\n                }}\n                \n                className={`w-full p-3 rounded-lg transition-colors text-left group ${\n                  selectedUserId === selectedUser.id\n                    ? \"bg-primary text-accent-foreground\"\n                    : \"hover:bg-sidebar-accent text-sidebar-foreground\"\n                }`}\n              >\n                <div className=\"flex items-center gap-3 mb-2\">\n                  <div className=\"relative\">\n                    <img\n                      src={selectedUser.avatar_url || \"/placeholder.svg\"}\n                      alt={selectedUser.name}\n                      className=\"w-10 h-10 rounded-full\"\n                    />\n                    <div\n                      className={`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-sidebar ${\n                        selectedUser.status === \"online\"\n                          ? \"bg-green-500\"\n                          : selectedUser.status === \"away\"\n                            ? \"bg-yellow-500\"\n                            : \"bg-gray-500\"\n                      }`}\n                    />\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"font-medium text-sm truncate\">{selectedUser.name}</p>\n                    <p\n                      className={`text-xs truncate ${selectedUserId === selectedUser.id ? \"text-accent-foreground/80\" : \"text-sidebar-accent-foreground\"}`}\n                    >\n                      {selectedUser.status}\n                    </p>\n                  </div>\n                </div>\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-sidebar-border\">\n        <Button\n          onClick={handleLogout}\n          variant=\"outline\"\n          className=\"w-full text-sidebar-foreground border-sidebar-border hover:bg-sidebar-accent bg-transparent\"\n        >\n          Logout\n        </Button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 667, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/components/chat/chat-window.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useRef, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { getMessages, sendMessage, subscribeToMessages, getUserById, startTyping, stopTyping, subscribeToTyping } from \"@/lib/supabase/chat\"\n\ninterface ChatWindowProps {\n  chatId: string | null\n  currentUserId: string\n}\n\nexport default function ChatWindow({ chatId, currentUserId }: ChatWindowProps) {\n  const [messages, setMessages] = useState<any[]>([])\n  const [inputValue, setInputValue] = useState(\"\")\n  const [currentUser, setCurrentUser] = useState<any>(null)\n  const [isLoading, setIsLoading] = useState(false)\n  const [isSending, setIsSending] = useState(false)\n  const [typingUsers, setTypingUsers] = useState<string[]>([])\n  const [typingChannel, setTypingChannel] = useState<any>(null)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n\n  useEffect(() => {\n    if (!chatId) return\n\n    const loadMessages = async () => {\n      try {\n        setIsLoading(true)\n        const data = await getMessages(chatId)\n        setMessages(data)\n      } catch (error) {\n        console.error(\"Error loading messages:\", error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    // load current user details for optimistic UI\n    const loadCurrentUser = async () => {\n      try {\n        const user = await getUserById(currentUserId)\n        setCurrentUser(user)\n      } catch (err) {\n        // ignore, optional\n      }\n    }\n\n    loadMessages()\n    loadCurrentUser()\n\n    // Subscribe to real-time messages\n    const subscription = subscribeToMessages(chatId, (newMessage) => {\n      setMessages((prev) => {\n        // Avoid duplicates if message already exists (optimistic or already added)\n        if (prev.some((m) => m.id === newMessage.id)) return prev\n        return [...prev, newMessage]\n      })\n    })\n\n    // Subscribe to typing indicators\n    const typingSub = subscribeToTyping(chatId, (users) => {\n      setTypingUsers(users.filter(id => id !== currentUserId))\n    })\n\n    setTypingChannel(typingSub)\n\n    return () => {\n      subscription.unsubscribe()\n      typingSub.unsubscribe()\n      if (typingTimeoutRef.current) {\n        clearTimeout(typingTimeoutRef.current)\n      }\n    }\n  }, [chatId])\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" })\n  }, [messages])\n\n  const handleSendMessage = async () => {\n    if (!inputValue.trim() || !chatId || isSending) return\n\n    const messageText = inputValue\n    setInputValue(\"\")\n    setIsSending(true)\n\n    // Stop typing when sending message\n    if (typingChannel) {\n      stopTyping(typingChannel)\n    }\n\n    try {\n      // Optimistic UI: add temporary message so sender sees it immediately\n      const tempId = `temp-${Date.now()}`\n      const optimisticMessage = {\n        id: tempId,\n        conversation_id: chatId,\n        sender_id: currentUserId,\n        sender: currentUser || { id: currentUserId, name: \"You\", avatar_url: \"/placeholder.svg\" },\n        text: messageText,\n        created_at: new Date().toISOString(),\n      }\n\n      setMessages((prev) => [...prev, optimisticMessage])\n\n      const sent = await sendMessage(chatId, currentUserId, messageText)\n\n      // Replace optimistic message with server message (match temp id)\n      setMessages((prev) => {\n        const replaced = prev.map((m) => (m.id === tempId ? sent : m))\n        // Deduplicate by id, keeping the last occurrence\n        const unique = Array.from(new Map(replaced.map((m) => [m.id, m])).values())\n        return unique\n      })\n    } catch (error) {\n      console.error(\"Error sending message:\", error)\n      setInputValue(messageText) // Restore input on error\n    } finally {\n      setIsSending(false)\n    }\n  }\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(e.target.value)\n\n    if (!chatId || !currentUserId) return\n\n    // Start typing\n    if (typingChannel) {\n      startTyping(chatId, currentUserId)\n    }\n\n    // Clear existing timeout\n    if (typingTimeoutRef.current) {\n      clearTimeout(typingTimeoutRef.current)\n    }\n\n    // Set timeout to stop typing after 3 seconds of inactivity\n    typingTimeoutRef.current = setTimeout(() => {\n      if (typingChannel) {\n        stopTyping(typingChannel)\n      }\n    }, 3000)\n  }\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault()\n      handleSendMessage()\n    }\n  }\n\n  if (!chatId) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center bg-background\">\n        <div className=\"text-center space-y-4\">\n          <div className=\"w-16 h-16 rounded-full bg-muted mx-auto flex items-center justify-center\">\n            <svg className=\"w-8 h-8 text-muted-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\n              />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-semibold text-foreground\">Select a conversation</h3>\n          <p className=\"text-muted-foreground\">Choose a chat from the sidebar to start messaging</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-background\">\n      {/* Messages Area */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {isLoading ? (\n          <div className=\"flex items-center justify-center h-full\">\n            <div className=\"animate-spin\">\n              <div className=\"w-8 h-8 rounded-full border-4 border-muted border-t-primary\"></div>\n            </div>\n          </div>\n        ) : messages.length === 0 ? (\n          <div className=\"flex items-center justify-center h-full\">\n            <p className=\"text-muted-foreground\">No messages yet. Start the conversation!</p>\n          </div>\n        ) : (\n          messages.map((message) => (\n            <div\n              key={message.id}\n              className={`flex gap-3 ${message.sender_id === currentUserId ? \"flex-row-reverse\" : \"\"}`}\n            >\n              <img\n                src={message.sender?.avatar_url || \"/placeholder.svg\"}\n                alt={message.sender?.name}\n                className=\"w-8 h-8 rounded-full flex-shrink-0\"\n              />\n              <div\n                className={`flex flex-col gap-1 max-w-xs ${message.sender_id === currentUserId ? \"items-end\" : \"items-start\"}`}\n              >\n                <p className=\"text-xs text-muted-foreground px-3\">{message.sender?.name || \"Unknown\"}</p>\n                <div\n                  className={`px-4 py-2 rounded-lg ${\n                    message.sender_id === currentUserId\n                      ? \"bg-primary text-primary-foreground rounded-br-none\"\n                      : \"bg-muted text-muted-foreground rounded-bl-none\"\n                  }`}\n                >\n                  <p className=\"text-sm break-words\">{message.text}</p>\n                </div>\n                <p className=\"text-xs text-muted-foreground px-3\">\n                  {new Date(message.created_at).toLocaleTimeString([], { hour: \"2-digit\", minute: \"2-digit\" })}\n                </p>\n              </div>\n            </div>\n          ))\n        )}\n        {typingUsers.length > 0 && (\n          <div className=\"flex gap-3\">\n            <div className=\"w-8 h-8 rounded-full bg-muted flex items-center justify-center flex-shrink-0\">\n              <div className=\"flex space-x-1\">\n                <div className=\"w-1 h-1 bg-muted-foreground rounded-full animate-bounce\"></div>\n                <div className=\"w-1 h-1 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\n                <div className=\"w-1 h-1 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\n              </div>\n            </div>\n            <div className=\"flex flex-col gap-1 max-w-xs items-start\">\n              <p className=\"text-xs text-muted-foreground px-3\">\n                {typingUsers.length === 1 ? \"Someone is typing...\" : `${typingUsers.length} people are typing...`}\n              </p>\n            </div>\n          </div>\n        )}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input Area */}\n      <div className=\"p-4 border-t border-border bg-card\">\n        <div className=\"flex gap-2\">\n          <button className=\"p-2 hover:bg-muted rounded-lg transition-colors flex-shrink-0\">\n            <svg className=\"w-5 h-5 text-foreground\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n            </svg>\n          </button>\n          <Input\n            type=\"text\"\n            placeholder=\"Type your message...\"\n            value={inputValue}\n            onChange={handleInputChange}\n            onKeyPress={handleKeyPress}\n            className=\"flex-1 h-10 bg-input border-border\"\n            disabled={isSending}\n          />\n          <Button\n            onClick={handleSendMessage}\n            disabled={!inputValue.trim() || isSending}\n            className=\"bg-primary hover:bg-primary/90 text-primary-foreground px-4 h-10\"\n          >\n            <svg className=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path d=\"M16.6915026,12.4744748 L3.50612381,13.2599618 C3.19218622,13.2599618 3.03521743,13.4170592 3.03521743,13.5741566 L1.15159189,20.0151496 C0.8376543,20.8006365 0.99,21.89 1.77946707,22.52 C2.41,22.99 3.50612381,23.1 4.13399899,22.8429026 L21.714504,14.0454487 C22.6563168,13.5741566 23.1272231,12.6315722 22.9702544,11.6889879 L4.13399899,1.16346272 C3.34915502,0.9 2.40734225,1.00636533 1.77946707,1.4776575 C0.994623095,2.10604706 0.837654326,3.0486314 1.15159189,3.99701575 L3.03521743,10.4380088 C3.03521743,10.5950961 3.19218622,10.7521935 3.50612381,10.7521935 L16.6915026,11.5377804 C16.6915026,11.5377804 17.1624089,11.5377804 17.1624089,12.0090725 C17.1624089,12.4744748 16.6915026,12.4744748 16.6915026,12.4744748 Z\" />\n            </svg>\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1153, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/app/chat/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useAuth } from \"@/context/auth-context\"\nimport { useRouter } from \"next/navigation\"\nimport { useEffect, useState } from \"react\"\nimport Sidebar from \"@/components/chat/sidebar\"\nimport ChatWindow from \"@/components/chat/chat-window\"\n\nexport default function ChatPage() {\n  const { user, isLoading } = useAuth()\n  const router = useRouter()\n  const [selectedChat, setSelectedChat] = useState<string | null>(null)\n\n  useEffect(() => {\n    if (!isLoading && !user) {\n      router.push(\"/login\")\n    }\n  }, [user, isLoading, router])\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <div className=\"animate-spin\">\n          <div className=\"w-12 h-12 rounded-full border-4 border-muted border-t-primary\"></div>\n        </div>\n      </div>\n    )\n  }\n\n  if (!user) return null\n\n  return (\n    <div className=\"flex h-screen bg-background overflow-hidden\">\n      <Sidebar selectedChat={selectedChat} onSelectChat={setSelectedChat} />\n      <ChatWindow chatId={selectedChat} currentUserId={user.id} />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,IAAA,sIAAO;IACnC,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAEhE,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,aAAa,CAAC,MAAM;YACvB,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;QAAM;QAAW;KAAO;IAE5B,IAAI,WAAW;QACb,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;;;;;;;;;;;;;;;IAIvB;IAEA,IAAI,CAAC,MAAM,OAAO;IAElB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,yIAAO;gBAAC,cAAc;gBAAc,cAAc;;;;;;0BACnD,8OAAC,gJAAU;gBAAC,QAAQ;gBAAc,eAAe,KAAK,EAAE;;;;;;;;;;;;AAG9D"}}]
}