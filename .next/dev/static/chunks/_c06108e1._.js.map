{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\"\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY\n\nif (!supabaseUrl || !supabaseKey) {\n  throw new Error(\"Missing Supabase environment variables\")\n}\n\nexport const supabase = createBrowserClient(supabaseUrl, supabaseKey)\n"],"names":[],"mappings":";;;;AAEoB;AAFpB;AAAA;;AAEA,MAAM;AACN,MAAM;AAEN;;AAIO,MAAM,WAAW,IAAA,oMAAmB,EAAC,aAAa"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///D:/real-time-chat-app/context/auth-context.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { createContext, useContext, useState, useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { supabase } from \"@/lib/supabase/client\"\nimport type { User } from \"@/lib/types\"\n\ninterface AuthContextType {\n  user: User | null\n  isLoading: boolean\n  login: (email: string, password: string) => Promise<void>\n  signup: (name: string, email: string, password: string) => Promise<void>\n  logout: () => Promise<void>\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined)\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [user, setUser] = useState<User | null>(null)\n  const [isLoading, setIsLoading] = useState(true)\n  const router = useRouter()\n\n  // Initialize auth state\n  useEffect(() => {\n    const initAuth = async () => {\n      try {\n        // Get current session\n        const {\n          data: { session },\n        } = await supabase.auth.getSession()\n\n        if (session) {\n          // Fetch user profile from database\n          const { data, error } = await supabase.from(\"users\").select(\"*\").eq(\"id\", session.user.id).single()\n\n          if (error) throw error\n          if (data) setUser(data)\n        }\n      } catch (error) {\n        console.error(\"Auth initialization error:\", error)\n      } finally {\n        setIsLoading(false)\n      }\n    }\n\n    initAuth()\n\n    // Listen for auth changes\n    const {\n      data: { subscription },\n    } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (session) {\n        const { data } = await supabase.from(\"users\").select(\"*\").eq(\"id\", session.user.id).single()\n\n        if (data) setUser(data)\n      } else {\n        setUser(null)\n      }\n    })\n\n    return () => {\n      subscription?.unsubscribe()\n    }\n  }, [])\n\n  const login = async (email: string, password: string) => {\n    setIsLoading(true)\n    try {\n      const { error } = await supabase.auth.signInWithPassword({\n        email,\n        password,\n      })\n\n      if (error) throw error\n      router.push(\"/chat\")\n    } catch (error) {\n      console.error(\"Login error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const signup = async (name: string, email: string, password: string) => {\n    setIsLoading(true)\n    try {\n      // Sign up with Supabase Auth\n      const {\n        data: { user: authUser },\n        error: authError,\n      } = await supabase.auth.signUp({\n        email,\n        password,\n        options: {\n          emailRedirectTo: process.env.NEXT_PUBLIC_DEV_SUPABASE_REDIRECT_URL || window.location.origin,\n        },\n      })\n\n      if (authError) throw authError\n      if (!authUser) throw new Error(\"Signup failed\")\n\n      // Create user profile\n      const avatar_url = `https://api.dicebear.com/7.x/avataaars/svg?seed=${email}`\n\n      const { error: profileError } = await supabase.from(\"users\").insert([\n        {\n          id: authUser.id,\n          email,\n          name,\n          avatar_url,\n          status: \"online\",\n        },\n      ])\n\n      if (profileError) throw profileError\n      router.push(\"/chat\")\n    } catch (error) {\n      console.error(\"Signup error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  const logout = async () => {\n    setIsLoading(true)\n    try {\n      const { error } = await supabase.auth.signOut()\n      if (error) throw error\n      setUser(null)\n      router.push(\"/login\")\n    } catch (error) {\n      console.error(\"Logout error:\", error)\n      throw error\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return <AuthContext.Provider value={{ user, isLoading, login, signup, logout }}>{children}</AuthContext.Provider>\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext)\n  if (context === undefined) {\n    throw new Error(\"useAuth must be used within AuthProvider\")\n  }\n  return context\n}\n"],"names":[],"mappings":"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"}}]
}